# ==============================================
# API Environment Variables
# ==============================================

# -------------------- Server --------------------
# Port the API server will listen on
PORT=3001

# Node environment (development, production, test)
NODE_ENV=development

# -------------------- Sentry --------------------
# Sentry DSN for error tracking and performance monitoring
# Get from: https://sentry.io/settings/projects/your-project/keys/
SENTRY_DSN=https://xxxxxxxxxxxxxxxxxxxxxxxxxxxxx@sentry.io/xxxxxxx

# Sentry environment (defaults to NODE_ENV if not set)
SENTRY_ENVIRONMENT=development

# Sentry traces sample rate (0.0 to 1.0)
# 1.0 = 100% of transactions, 0.1 = 10% of transactions
# Recommended: 1.0 for dev, 0.1 for production
SENTRY_TRACES_SAMPLE_RATE=1.0

# -------------------- Voyage AI --------------------
VOYAGEAI_API_KEY=placeholer

# -------------------- Logging --------------------
# Log level for Pino logger (trace, debug, info, warn, error, fatal)
LOG_LEVEL=info

# -------------------- Database --------------------
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/10xstudent_dev

# -------------------- Authentication --------------------
# Clerk publishable key (safe to expose in client)
CLERK_PUBLISHABLE_KEY=pk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Clerk secret key (keep secure, server-side only)
CLERK_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Clerk webhook signing secret for verifying webhook signatures
# Get this from Clerk Dashboard > Webhooks > Add Endpoint
CLERK_WEBHOOK_SIGNING_SECRET=whsec_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# -------------------- Google AI --------------------
# Google API key for Gemini embeddings and AI features
# Get from: https://aistudio.google.com/app/apikey
GOOGLE_API_KEY=AIzaSyxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# -------------------- Cloudflare R2 Storage --------------------
# R2 bucket name for document storage
R2_BUCKET_NAME=10xstudent-documents

# R2 account ID
R2_ACCOUNT_ID=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# R2 access key ID
R2_ACCESS_KEY_ID=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# R2 secret access key
R2_SECRET_ACCESS_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# R2 endpoint URL (usually auto-generated based on account ID)
# Format: https://{account-id}.r2.cloudflarestorage.com
R2_ENDPOINT=https://xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.r2.cloudflarestorage.com

# -------------------- Redis (for BullMQ queues) --------------------
# Redis connection URL for job queues and rate limiting
# Format: redis://[username]:[password]@host:port/db
REDIS_URL=redis://localhost:6379

# -------------------- Rate Limiting --------------------
# Rate limit window in milliseconds (default: 60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# Maximum requests per window for general API endpoints (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# Maximum requests per window for AI-heavy endpoints (default: 10)
RATE_LIMIT_AI_MAX_REQUESTS=10

# -------------------- CORS --------------------
# Comma-separated list of allowed origins for CORS
# Example: http://localhost:5173,http://localhost:3000
CORS_ORIGINS=http://localhost:5173

# -------------------- Typst Compilation --------------------
# Maximum file size for document uploads (in bytes)
# Default: 10MB
MAX_DOCUMENT_SIZE=10485760

# Maximum number of assets per document
MAX_ASSETS_PER_DOCUMENT=50
